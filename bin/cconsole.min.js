/*! cross-console 0.2.0 2013-08-20 */
!function(a){"use strict";var b={},c=this||a;c.console&&(b=Object.create(c.console)),"undefined"!=typeof module?module.exports=b:c.cconsole=b,b.settings={standBy:!1,debug:!1,environment:"development",history:[],notify:function(){}},b.set=function(a){if("undefined"==typeof a||"object"!=typeof a||a instanceof String||a instanceof Array)throw Error("You must pass an plain object to set settings. EG: { }");for(var c in a)a.hasOwnProperty(c)&&(b.settings[c]=a[c])};var d=Array.prototype.slice,e=c.console,f=["error","warn","info","debug","log"],g=["assert","clear","count","dir","dirxml","exception","group","groupCollapsed","groupEnd","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","memory","profiles"],h=g.length,i=function(a){b[a]=function(){var f=d.call(arguments);(b.settings.standBy||b.settings.debug&&e&&e[a])&&(e.firebug?e[a].apply(c,f):e[a]?e[a].apply(e,f):e.log.apply(e,f))}},j=function(a,f){b[f]=function(){var a=d.call(arguments);if(b.settings.standBy)return e.firebug?e[f].apply(c,a):e[f]?e[f].apply(e,a):e.log.apply(e,a),void 0;if("error"===f||"production"!==b.settings.environment)try{var g,h,i,j=new Error,k=j&&j.stack,l="",m=/\//g;if(k&&"string"==typeof k)try{h=k.split(/\r\n|\r|\n/),h=h[h.length-1].split(/\//)}catch(n){h=["Failed to retrieve stack trace."]}if(i=h[h.length-1].split(/:/),"debug"!==f?(a.push(i[0]+" Line "+i[1]),l=i[0].replace(m,"~")+":"+i[1]):a.push((new Error&&(new Error).stack?(new Error).stack:"").split(/\r\n|\r|\n/)),!e||!b.settings.debug&&["error","warn"].indexOf(f)<0)return;if(g=[f].concat(a),g.push((new Date).getTime()),b.settings.history.push(g),"production"===b.settings.environment)return b.settings.notify(g,l),void 0;e.firebug?e[f].apply(c,a):e[f]?e[f].apply(e,a):e.log.apply(e,a)}catch(n){}}};for(c.console=b;--h>=0;)i(g[h]);for(h=f.length;--h>=0;)j(h,f[h])}(window);