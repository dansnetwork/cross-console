/*! cross-console 0.2.2 2013-08-23 */
!function(a){"use strict";var b={},c=this||a,d=c.console,e=Array.prototype.slice,f=c.localStorage&&c.JSON;d&&(b=Object.create(d)),"undefined"!=typeof module?module.exports=b:c.cconsole=b,b.settings={standBy:!1,debug:!1,environment:"development",history:f?JSON.parse(c.localStorage.getItem("CC.history"))||[]:[],maxHistory:100,filterLog:!1,notify:function(){}},b.set=function(a){if("undefined"==typeof a||"object"!=typeof a||a instanceof String||a instanceof Array)throw Error("You must pass an plain object to set settings. EG: { }");for(var c in a)a.hasOwnProperty(c)&&(b.settings[c]=a[c])},b.clearFilter=function(){b.settings.filterLog=!1},b.setFilter=function(a){if("string"!=typeof a&&!(a instanceof String))throw new Error("Filters must be of type string");b.settings.filterLog=a};var g=["error","warn","info","debug","log"],h=["assert","clear","count","dir","dirxml","exception","group","groupCollapsed","groupEnd","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","memory","profiles"],i=h.length,j=function(a){b[a]=function(){var f=e.call(arguments);(b.settings.standBy||b.settings.debug&&d&&d[a])&&(d.firebug?d[a].apply(c,f):d[a]?d[a].apply(d,f):d.log.apply(d,f))}},k=function(a,g){b[g]=function(){var a=e.call(arguments);if(b.settings.standBy)return d.firebug?d[g].apply(c,a):d[g]?d[g].apply(d,a):d.log.apply(d,a),void 0;if("error"===g||"production"!==b.settings.environment)try{var h,i,j,k=new Error,l=k&&k.stack,m="",n=/\//g,o=["error","warn"];if(l&&"string"==typeof l)try{i=l.split(/\r\n|\r|\n/),i=i[i.length-1].split(/\//)}catch(p){i=["Failed to retrieve stack trace."]}if(j=i[i.length-1].split(/:/),"debug"!==g?(a.push(j[0]+" Line "+j[1]),m=j[0].replace(n,"~")+":"+j[1]):a.push((new Error&&(new Error).stack?(new Error).stack:"").split(/\r\n|\r|\n/)),!d||o.indexOf(g)<0&&(!b.settings.debug||a[0].indexOf(b.settings.filterLog)<0))return;if(h=[g].concat(a),h.push((new Date).getTime()),b.settings.history.unshift(h),b.settings.history.length>b.settings.maxHistory&&b.settings.history.pop(),f&&c.localStorage.setItem("CC.history",c.JSON.stringify(b.settings.history)),"production"===b.settings.environment)return b.settings.notify(h,m),void 0;d.firebug?d[g].apply(c,a):d[g]?d[g].apply(d,a):d.log.apply(d,a)}catch(p){}}};for(c.console=b;--i>=0;)j(h[i]);for(i=g.length;--i>=0;)k(i,g[i])}(window);